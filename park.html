<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>สวน RPG - TastLink</title>
<style>
  body{
    font-family: 'Courier New', monospace;
    background: linear-gradient(to top, #2a2a72, #009ffd);
    margin:0;
    color:#fff;
  }
  header{
    background-color: rgba(0,0,0,0.7);
    padding:10px;
    text-align:center;
  }
  #player-info{
    display:flex;
    align-items:center;
    justify-content:center;
    margin:10px;
  }
  #player-avatar{
    font-size:3rem;
    width:80px;
    height:80px;
    display:flex;
    align-items:center;
    justify-content:center;
    border-radius:50%;
    margin-right:10px;
  }
  .shop{
    background-color: rgba(255,255,255,0.1);
    margin:10px;
    padding:10px;
    border-radius:10px;
  }
  .menu-item{
    display:flex;
    justify-content:space-between;
  }
  button{
    cursor:pointer;
    border-radius:5px;
    padding:5px 10px;
    margin:5px;
    border:none;
    background-color:#ffcc00;
    color:#000;
  }
  #garden{
    display:flex;
    flex-wrap:wrap;
    margin-top:20px;
    justify-content:center;
  }
  .review-avatar{
    margin:5px;
    text-align:center;
  }
</style>
</head>
<body>

<header>
  <h1>สวน RPG ของ TastLink</h1>
  <p>สวัสดี นักผจญภัย! รีวิวอาหารและโหวตร้านโปรดของเจ้าที่นี่!</p>
</header>

<div id="player-info">
  <div id="player-avatar"></div>
  <div id="player-name-display"></div>
</div>

<h2>ร้านอาหารแนะนำวันนี้</h2>
<div id="shops-container"></div>

<h2>สวนแห่งรีวิว</h2>
<div id="garden"></div>

<script>
  // ดึงข้อมูลจาก URL
  const urlParams = new URLSearchParams(window.location.search);
  const playerName = urlParams.get('player');
  const playerEmoji = urlParams.get('emoji');
  const playerBg = urlParams.get('bg');

  const playerAvatar = document.getElementById('player-avatar');
  playerAvatar.textContent = playerEmoji;
  playerAvatar.style.backgroundColor = playerBg;

  document.getElementById('player-name-display').textContent = playerName;

  // ตัวอย่างร้านอาหาร
  const shops = [
    {name:'ร้านปิ้งย่าง', menu:[{name:'หมูย่าง',price:100},{name:'ไก่ย่าง',price:90},{name:'สเต็ก',price:150}]},
    {name:'ร้านกาแฟ', menu:[{name:'ลาเต้',price:60},{name:'คาปูชิโน',price:65},{name:'มอคค่า',price:70}]},
    {name:'ร้านขนมหวาน', menu:[{name:'วาฟเฟิล',price:80},{name:'แพนเค้ก',price:75},{name:'ไอศกรีม',price:50}]},
    {name:'ร้านอาหารญี่ปุ่น', menu:[{name:'ซูชิ',price:120},{name:'ราเมง',price:110},{name:'ข้าวหน้าปลา',price:130}]},
    {name:'ร้านอาหารไทย', menu:[{name:'ต้มยำกุ้ง',price:90},{name:'ผัดไทย',price:85},{name:'แกงเขียวหวาน',price:95}]},
  ];

  const shopsContainer = document.getElementById('shops-container');

  shops.forEach((shop,i)=>{
    const shopDiv = document.createElement('div');
    shopDiv.className='shop';
    const shopName = document.createElement('h3');
    shopName.textContent = shop.name;
    shopDiv.appendChild(shopName);

    shop.menu.forEach((item,j)=>{
      const menuDiv = document.createElement('div');
      menuDiv.className='menu-item';
      menuDiv.textContent = `${item.name} - ${item.price} บาท`;

      const voteBtn = document.createElement('button');
      voteBtn.textContent='โหวตเมนู';
      voteBtn.addEventListener('click',()=>{
        addReview(playerName, playerEmoji, `${item.name} ที่ ${shop.name}`);
        voteBtn.disabled = true;
      });

      menuDiv.appendChild(voteBtn);
      shopDiv.appendChild(menuDiv);
    });

    const voteShopBtn = document.createElement('button');
    voteShopBtn.textContent='โหวตร้านนี้';
    voteShopBtn.addEventListener('click',()=>{
      addReview(playerName, playerEmoji, `โหวตร้าน ${shop.name}`);
      voteShopBtn.disabled = true;
    });
    shopDiv.appendChild(voteShopBtn);

    shopsContainer.appendChild(shopDiv);
  });

  const garden = document.getElementById('garden');

  function addReview(name, emoji, text){
    const div = document.createElement('div');
    div.className='review-avatar';
    div.innerHTML=`<div style="font-size:2rem">${emoji}</div><div>${text}</div>`;
    garden.appendChild(div);
  }
</script>

</body>
</html>
